# 技术栈与依赖

<cite>
**本文档引用的文件**  
- [package.json](file://package.json)
- [tsconfig.json](file://tsconfig.json)
- [next.config.ts](file://next.config.ts)
- [postcss.config.mjs](file://postcss.config.mjs)
- [tailwind.config.ts](file://tailwind.config.ts)
- [XlsxWatcherPlugin.js](file://plugins/XlsxWatcherPlugin.js)
- [xlsxToJson.js](file://plugins/xlsxToJson.js)
- [data.json](file://src/config/data.json)
- [Icon.tsx](file://src/app/_components/Icon.tsx)
- [MDRender.tsx](file://src/app/_components/MDRender.tsx)
- [layout.tsx](file://src/app/layout.tsx)
- [api.ts](file://src/app/common/api.ts)
- [useCarousel.ts](file://src/app/hooks/useCarousel.ts)
- [为什么要用Nextjs？.md](file://public/files/engineer/为什么要用Nextjs？.md)
</cite>

## 目录
1. [项目结构概览](#项目结构概览)
2. [核心框架与UI库](#核心框架与ui库)
3. [状态管理方案](#状态管理方案)
4. [样式与动画系统](#样式与动画系统)
5. [数据处理与文件转换](#数据处理与文件转换)
6. [TypeScript配置策略](#typescript配置策略)
7. [Webpack扩展机制](#webpack扩展机制)
8. [PostCSS与Tailwind集成](#postcss与tailwind集成)
9. [版本信息与选型理由](#版本信息与选型理由)

## 项目结构概览

本项目采用标准的Next.js App Router架构，结合模块化组件设计与自动化构建流程。主要目录包括：
- `src/app`：基于App Router的页面与组件结构
- `src/components`：可复用UI组件
- `src/hooks`：自定义React Hook
- `src/config`：静态配置与数据源
- `plugins`：自定义Webpack插件
- `public/files`：技术文档与学习笔记
- `functions`：Netlify Serverless函数

**Section sources**
- [layout.tsx](file://src/app/layout.tsx#L1-L50)
- [package.json](file://package.json#L1-L10)

## 核心框架与UI库

### Next.js 15 与 React 19

项目基于Next.js 15构建，采用最新的App Router路由系统，支持服务端渲染（SSR）、静态生成（SSG）和增量静态再生（ISR）。React 19提供了更高效的渲染机制与并发特性。

App Router的优势体现在：
- 嵌套路由结构清晰
- 支持流式渲染与Suspense
- 内置API路由支持
- 更好的数据加载与缓存策略

### TDesign React 组件库

采用腾讯开源的TDesign React（`tdesign-react`）作为UI组件库，提供企业级设计语言与高质量组件实现。配合`tdesign-icons-react`使用图标资源，确保视觉一致性。

TDesign的优势：
- 完整的设计系统支持
- 高可定制性
- 良好的TypeScript支持
- 丰富的组件生态

**Section sources**
- [package.json](file://package.json#L15-L20)
- [为什么要用Nextjs？.md](file://public/files/engineer/为什么要用Nextjs？.md#L1-L50)

## 状态管理方案

### Jotai 与 Zustand 双引擎

项目同时采用`jotai`和`zustand`进行状态管理，根据场景灵活选择：

- **Jotai**：用于细粒度原子状态管理，适合局部UI状态（如开关、表单输入）
- **Zustand**：用于全局应用状态管理，适合跨组件共享的数据流（如用户信息、主题设置）

两者均提供优秀的TypeScript支持，轻量且无样板代码，符合现代React状态管理趋势。

**Section sources**
- [package.json](file://package.json#L12-L13)
- [useCarousel.ts](file://src/app/hooks/useCarousel.ts#L1-L20)

## 样式与动画系统

### Tailwind CSS 原子化样式

采用Tailwind CSS实现原子化CSS开发，通过`tailwind.config.ts`进行主题扩展，包括：
- 自定义断点（`xs`、`pc`）
- 字体大小映射（`xss`、`lg`）
- 字重定义（100–900）
- 字体族配置

优势：
- 极致的开发效率
- 减少CSS文件体积
- 提高样式一致性
- 支持响应式设计

### animate.css 动画库

集成`animate.css`提供预设CSS动画效果，用于页面过渡、元素入场等场景。通过简单类名即可应用复杂动画，降低动画实现成本。

**Section sources**
- [tailwind.config.ts](file://tailwind.config.ts#L1-L40)
- [globals.css](file://src/app/globals.css#L1-L10)

## 数据处理与文件转换

### xlsx 库处理Excel数据

使用`xlsx`库（SheetJS）处理Excel文件，实现数据导入与转换。项目中通过自定义插件链完成自动化流程：

1. `XlsxWatcherPlugin.js`：监听`datalist.xlsx`文件变化
2. `xlsxToJson.js`：将XLSX转换为JSON格式
3. 构建时执行`handXlsxToJson.js`脚本生成最终数据

该机制确保配置数据与代码同步更新，提升内容管理效率。

**Section sources**
- [package.json](file://package.json#L25)
- [XlsxWatcherPlugin.js](file://plugins/XlsxWatcherPlugin.js#L1-L30)
- [xlsxToJson.js](file://plugins/xlsxToJson.js#L1-L20)
- [data.json](file://src/config/data.json#L1-L5)

## TypeScript配置策略

`tsconfig.json`配置遵循Next.js推荐规范，关键设置包括：
- `moduleResolution: "bundler"`：支持现代打包器解析
- `jsx: "preserve"`：保留JSX供Next.js处理
- `paths: {"@/*": ["./src/*"]}`：启用绝对路径导入
- `incremental: true`：启用增量编译提升性能
- `plugins: [{"name": "next"}]`：启用Next.js类型检查插件

此配置确保类型安全的同时优化开发体验。

**Section sources**
- [tsconfig.json](file://tsconfig.json#L1-L28)

## Webpack扩展机制

通过`next.config.ts`中的`webpack`配置函数注入自定义插件：

```ts
webpack: (config, options) => {
  if (options.dev) {
    config.plugins.push(new XlsxWatcherPlugin({ filePath: "src/config/datalist.xlsx" }));
  }
  return config;
}
```

该机制在开发模式下动态监听XLSX文件变更，触发热重载，实现数据驱动的开发流程。

**Section sources**
- [next.config.ts](file://next.config.ts#L30-L45)

## PostCSS与Tailwind集成

通过`postcss.config.mjs`配置PostCSS插件链：

```js
const config = {
  plugins: {
    tailwindcss: {},
  },
};
```

此配置确保Tailwind CSS在构建过程中正确处理，生成优化后的CSS输出。结合Next.js内置的CSS支持，实现高效的样式处理流程。

**Section sources**
- [postcss.config.mjs](file://postcss.config.mjs#L1-L8)

## 版本信息与选型理由

| 依赖项 | 版本 | 选型理由 |
|-------|------|----------|
| Next.js | 15.1.7 | 支持App Router、RSC、流式渲染，构建现代化全栈应用 |
| React | 19.0.0 | 最新并发渲染特性，提升性能与用户体验 |
| Tailwind CSS | 3.4.1 | 原子化CSS提升开发效率，减少样式冲突 |
| TDesign React | 1.11.3 | 企业级UI组件库，设计规范统一，维护良好 |
| Jotai | 2.12.4 | 轻量级原子状态管理，适合细粒度控制 |
| Zustand | 5.0.4 | 简单直观的全局状态管理，无样板代码 |
| xlsx | 0.18.5 | 成熟的Excel处理库，支持浏览器与Node环境 |
| animate.css | 4.1.1 | 丰富的预设动画，降低CSS动画实现成本 |

**Section sources**
- [package.json](file://package.json#L5-L30)