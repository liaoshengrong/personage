# 样式策略

<cite>
**本文档引用的文件**  
- [globals.css](file://src/app/globals.css)
- [tailwind.config.ts](file://tailwind.config.ts)
- [postcss.config.mjs](file://postcss.config.mjs)
- [useMobile.ts](file://src/app/hooks/useMobile.ts)
- [Navbar.tsx](file://src/app/_components/Navbar.tsx)
- [layout.tsx](file://src/app/layout.tsx)
</cite>

## 目录
1. [简介](#简介)
2. [项目样式架构概览](#项目样式架构概览)
3. [Tailwind CSS 原子化开发模式](#tailwind-css-原子化开发模式)
4. [全局样式定义（globals.css）](#全局样式定义globalscss)
5. [PostCSS 处理流程](#postcss-处理流程)
6. [Tailwind 主题配置详解](#tailwind-主题配置详解)
7. [响应式类名与设备适配控制](#响应式类名与设备适配控制)
8. [组件中的响应式应用示例](#组件中的响应式应用示例)
9. [结论](#结论)

## 简介
本文档详细说明本项目的样式架构设计，重点阐述如何通过 Tailwind CSS 的原子化开发模式提升前端开发效率。文档涵盖全局样式配置、PostCSS 构建流程、自定义主题设置以及基于 `useMobile` 的精细化设备适配策略，帮助开发者理解并高效使用项目中的样式体系。

## 项目样式架构概览
项目采用现代前端样式工程化方案，结合 Tailwind CSS 原子化类名系统与 PostCSS 构建流程，实现高效、可维护的样式管理。整体架构如下：

```mermaid
graph TB
A[Tailwind CSS] --> B[原子化类名]
C[postcss.config.mjs] --> D[PostCSS 处理]
D --> E[Tailwind 插件注入]
E --> F[生成最终 CSS]
G[globals.css] --> H[@tailwind 指令导入]
H --> F
I[tailwind.config.ts] --> J[自定义主题配置]
J --> E
K[useMobile] --> L[响应式逻辑控制]
L --> M[动态样式渲染]
```

**Diagram sources**  
- [globals.css](file://src/app/globals.css#L1-L62)
- [tailwind.config.ts](file://tailwind.config.ts#L1-L39)
- [postcss.config.mjs](file://postcss.config.mjs#L1-L8)

**Section sources**  
- [globals.css](file://src/app/globals.css#L1-L62)
- [tailwind.config.ts](file://tailwind.config.ts#L1-L39)

## Tailwind CSS 原子化开发模式
项目采用 Tailwind CSS 的原子化（Atomic）开发模式，即每个类名对应一个具体的 CSS 属性值（如 `text-center`、`p-4`、`bg-blue-500`），避免传统语义化类名带来的样式复用与维护难题。

该模式显著提升开发效率：
- **无需编写自定义 CSS**：大多数样式需求可通过组合现有类名完成
- **一致性保障**：所有间距、颜色、字体等均来自统一设计系统
- **减少 CSS 文件体积**：仅生成实际使用的类名，避免冗余样式
- **快速迭代**：在 JSX 中直接调整类名即可实时预览效果

**Section sources**  
- [tailwind.config.ts](file://tailwind.config.ts#L1-L39)
- [globals.css](file://src/app/globals.css#L1-L62)

## 全局样式定义globalscss
`globals.css` 是项目的全局样式入口文件，承担基础样式重置、字体加载与跨浏览器滚动条统一等职责。

主要功能包括：
- 引入 Tailwind 的三大层级：`base`（基础样式）、`components`（组件类）、`utilities`（工具类）
- 重置默认 `margin` 和 `padding`，统一 `line-height`
- 定义自定义字体 `Enfont` 并通过 `@font-face` 加载 WOFF 文件
- 实现跨浏览器隐藏滚动条的 `.hide-scrollbar` 类
- 在桌面端（>768px）恢复美观的滚动条样式

```css
.hide-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
  overflow: -moz-scrollbars-none;
}
```

**Section sources**  
- [globals.css](file://src/app/globals.css#L1-L62)

## PostCSS 处理流程
项目通过 `postcss.config.mjs` 配置 PostCSS 构建流程，将 Tailwind CSS 集成到构建系统中。

其核心作用是：
- 在构建阶段自动注入 `tailwindcss` 插件
- 解析源码中的类名使用情况
- 根据 `tailwind.config.ts` 配置生成最终的 CSS 样式表
- 支持与其他 PostCSS 插件（如 autoprefixer）协同工作

该流程确保了 Tailwind 类名能被正确解析并输出为实际 CSS 规则。

**Section sources**  
- [postcss.config.mjs](file://postcss.config.mjs#L1-L8)

## Tailwind 主题配置详解
`tailwind.config.ts` 文件定义了项目的自定义主题配置，扩展了默认的设计系统。

关键配置项包括：

### 自定义字体
```ts
fontFamily: {
  en: ["Enfont"],
}
```
允许通过 `font-en` 类在组件中使用自定义英文字体。

### 自定义断点
```ts
screens: {
  xs: { max: "768px" },
  pc: { min: "769px" },
}
```
定义移动设备（`xs`）与 PC 端（`pc`）的响应式断点，便于在类名中使用如 `xs:hidden` 或 `pc:flex`。

### 自定义字号
通过 `rem()` 工具函数基于 16px 基准计算 rem 值：
```ts
fontSize: {
  xss: rem(10), // 0.625rem
  lg: rem(18),  // 1.125rem
}
```
可在类名中直接使用 `text-xss` 或 `text-lg`。

### 字重扩展
显式定义 100–900 的字重，确保与设计稿对齐：
```ts
fontWeight: {
  100: "100",
  ...
  900: "900",
}
```

**Section sources**  
- [tailwind.config.ts](file://tailwind.config.ts#L1-L39)

## 响应式类名与设备适配控制
项目结合 Tailwind 的响应式前缀类名与 React 自定义 Hook `useMobile`，实现灵活的设备适配策略。

### Tailwind 响应式类名
利用配置的 `xs` 和 `pc` 断点，可在 JSX 中直接使用：
- `xs:hidden`：在移动设备上隐藏
- `pc:flex`：在 PC 端显示为 flex 布局
- `xs:text-sm`：移动端使用小字号

### useMobile Hook 实现
`useMobile` Hook 监听窗口宽度变化，判断当前是否为移动设备：

```ts
export const useMobile = () => {
  const [isMobile, setIsMobile] = useState<boolean>();

  useEffect(() => {
    const handleResize = () => {
      setIsMobile(window.innerWidth <= 768);
    };

    handleResize();
    window.addEventListener("resize", handleResize);

    return () => {
      window.removeEventListener("resize", handleResize);
    };
  }, []);

  return isMobile;
};
```

该 Hook 返回布尔值，可在组件逻辑中进行条件渲染或动态样式控制。

**Section sources**  
- [useMobile.ts](file://src/app/hooks/useMobile.ts#L2-L20)

## 组件中的响应式应用示例
以 `Navbar` 组件为例，展示响应式策略的实际应用：

```tsx
const isMobile = useMobile();

return (
  <div
    className="xs:flex xs:h-12 xs:justify-between xs:items-center xs:absolute z-50 w-full top-0 left-0"
    style={isMobile ? fixedStyles : {}}
  >
    <div className="text-base xs:text-sm ...">MARK LIAO</div>
    <div className="flex gap-1 items-center justify-center xs:hidden">...</div>
    <div className="hidden xs:flex gap-1 items-center justify-center">...</div>
  </div>
);
```

说明：
- 使用 `xs:text-sm` 在移动端缩小标题字号
- 使用 `xs:hidden` 和 `hidden xs:flex` 切换导航菜单的显示方式
- 结合 `useMobile` 动态设置 `position` 和背景色，实现移动端滚动隐藏效果

**Section sources**  
- [Navbar.tsx](file://src/app/_components/Navbar.tsx#L1-L113)
- [useMobile.ts](file://src/app/hooks/useMobile.ts#L2-L20)

## 结论
本项目通过 Tailwind CSS 的原子化开发模式，结合 PostCSS 构建流程与精细化的响应式控制，构建了一套高效、可维护的样式架构。`globals.css` 提供基础样式保障，`tailwind.config.ts` 实现设计系统定制，`useMobile` Hook 补充运行时设备判断能力，三者协同工作，显著提升开发效率与用户体验一致性。